(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d1ed4706"],{"41ce":function(e,n,t){"use strict";t.r(n);var r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"learn"},[t("LearnComponent",{attrs:{decks:e.decks,numberOfSelectedDecks:e.numberOfSelectedDecks,learningSession:e.learningSession,cardLimit:e.cardLimit}})],1)},i=[],a=(t("a9e3"),t("d4ec")),s=t("262e"),o=t("2caf"),c=t("9ab4"),l=t("2b0e"),u=t("2fe1"),d=function(){var e=this,n=e.$createElement,t=e._self._c||n;return e.numberOfSelectedDecks>0?t("div",{staticClass:"learn"},[e.renderComponent?t("text-viewer",{staticClass:"max-height",staticStyle:{color:"black"},attrs:{text:e.curLearningElement.card.q}}):e._e(),t("div",{staticStyle:{height:"10px"}}),t("div",{staticClass:"max-height",staticStyle:{color:"black"}},[e.curLearningElement.showAnswer?t("text-viewer",{attrs:{text:e.curLearningElement.card.a}}):t("v-btn",{on:{click:e.revealAnswer}},[e._v("Reveal Answer")])],1),e.curLearningElement.showAnswer?t("Rating",{ref:"rating",attrs:{numberOfStars:e.numberOfStarsInRating},on:{rated:e.onRating}}):e._e(),t("v-card-actions",[t("v-btn",{attrs:{text:"",disabled:0===e.learningSessionManager.learningSession.currentElementIndex,color:"grey lighten-1"},on:{click:e.moveToPrev}},[e._v("Previous")]),t("v-spacer"),t("v-btn",{attrs:{text:"",color:e.buttonNext.color},on:{click:e.moveToNext}},[e._v(e._s(e.buttonNext.text))])],1)],1):e._e()},g=[],h=(t("4de4"),t("ac1f"),t("5319"),t("b85c")),v=t("bee2"),f=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("viewer",{staticStyle:{"background-color":"white"},attrs:{initialValue:e.text}})},m=[],S=(t("a7be"),t("fe5f"),t("4ede")),b={props:["text"],created:function(){console.log("This Component gets loaded.")},data:function(){return{}},components:{viewer:S["Viewer"]}},k=b,p=t("2877"),C=Object(p["a"])(k,f,m,!1,null,null,null),E=C.exports,I=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"rating"},[t("div",{staticClass:"star-wrapper"},[t("table",[t("tr",[t("th",{staticClass:"overline grey--text text--darken-1"},[t("button",{staticClass:"mib-f",on:{click:function(n){return e.onClickStar(1)}}},[e._v(" WRONG ")])]),t("th",{staticClass:"overline grey--text text--darken-1"},[t("button",{staticClass:"mib-r",on:{click:function(n){return e.onClickStar(2)}}},[e._v(" RIGHT ")])])])])])])},y=[],O=l["a"].extend({props:{numberOfStars:Number}}),x=function(e){Object(s["a"])(t,e);var n=Object(o["a"])(t);function t(){var e;return Object(a["a"])(this,t),e=n.apply(this,arguments),e.numberOfSelectedStar=0,e}return Object(v["a"])(t,[{key:"onClickStar",value:function(e){this.numberOfSelectedStar=e,this.$emit("rated",e)}},{key:"setRating",value:function(e){this.numberOfSelectedStar=e,this.$emit("rated",e,!0)}}]),t}(O);x=Object(c["a"])([u["a"]],x);var L=x,T=L,R=(t("76dc"),Object(p["a"])(T,I,y,!1,null,"4421f3d1",null)),w=R.exports,N=t("ebe2"),F=(t("7db0"),t("4160"),t("13d5"),t("a434"),t("159b"),(new Date).getTime());function _(e){var n,t=80;if(void 0===e.r||0===e.r.length)n=t;else{var r=e.r.reduce((function(e,n){return n.t>e.t?n:e})),i=(F-r.t)/864e5,a=r.r-i;n=Math.max(0,100-a)||1}return n}var j=function(){function e(n){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(a["a"])(this,e),this.decks=[],this.numberOfRecentCardsToIgnoreWhenSelectingNextCard={},this.cardsToSelectFrom=[],this.learningSession={},this.decks=n,this.numberOfRecentCardsToIgnoreWhenSelectingNextCard=r,this.cardsToSelectFrom=[],this.decks.forEach((function(e){e.cards.forEach((function(n){t.cardsToSelectFrom.push({deckId:e.id,cardId:n.id,showAnswer:!1,rating:void 0,card:void 0,weight:_(n)})}))})),this.learningSession={elements:[],currentElementIndex:0},this.injectNewCard()}return Object(v["a"])(e,[{key:"injectNewCard",value:function(){if(0===this.cardsToSelectFrom.length)return!1;var e=this.getRandomCardIndex();for(var n in this.learningSession.elements.push(this.cardsToSelectFrom[e]),this.cardsToSelectFrom.splice(e,1),this.numberOfRecentCardsToIgnoreWhenSelectingNextCard){var t=this.learningSession.elements.length-(this.numberOfRecentCardsToIgnoreWhenSelectingNextCard[Number(n)]+1);if(t>=0){var r,i=this.learningSession.elements[t];(null===(r=i.rating)||void 0===r?void 0:r.r)===Number(n)&&this.cardsToSelectFrom.push({deckId:i.deckId,cardId:i.cardId})}}return!0}},{key:"getRandomCardIndex",value:function(){for(var e=this.cardsToSelectFrom.reduce((function(e,n){return e+(n.weight||0)}),0),n=Math.random()*e,t=0,r=0;r<this.cardsToSelectFrom.length;r++)if(t+=this.cardsToSelectFrom[r].weight||0,t>n)return r;return Math.floor(Math.random()*this.cardsToSelectFrom.length)}},{key:"getCurrentLearningSessionElementWithCardDetails",value:function(){var e,n=this.learningSession.elements[this.learningSession.currentElementIndex];return n.card=null===(e=this.decks.find((function(e){return e.id===n.deckId})))||void 0===e?void 0:e.cards.find((function(e){return e.id===n.cardId})),n}},{key:"moveToNextLearningSessionElement",value:function(){if(this.learningSession.currentElementIndex!==this.learningSession.elements.length-1||this.injectNewCard()){this.learningSession.currentElementIndex++;var e=this.learningSession.elements[this.learningSession.currentElementIndex];e.showAnswer=!1}}},{key:"moveToPrevLearningSessionElement",value:function(){if(this.learningSession.currentElementIndex>0){this.learningSession.currentElementIndex--;var e=this.learningSession.elements[this.learningSession.currentElementIndex];e.showAnswer=!1}}},{key:"revealAnswerForCurrentLearningSessionElement",value:function(){var e=this.learningSession.elements[this.learningSession.currentElementIndex];e.showAnswer=!0}},{key:"saveRatingForCurrentLearningSessionElement",value:function(e){var n,t=this.learningSession.elements[this.learningSession.currentElementIndex],r=(new Date).getTime(),i=!1,a=this.decks.find((function(e){return e.id===t.deckId})),s=null===a||void 0===a?void 0:a.cards.find((function(e){return e.id===t.cardId}));if(null===(n=t.rating)||void 0===n?void 0:n.t){var o,c=null===s||void 0===s||null===(o=s.r)||void 0===o?void 0:o.find((function(e){var n;return e.t===(null===(n=t.rating)||void 0===n?void 0:n.t)}));c&&(c.t=r,c.r=e,i=!0)}else s&&(Array.isArray(null===s||void 0===s?void 0:s.r)||(s.r=[]),s.r.push({t:r,r:e}));return t.rating={t:r,r:e},Boolean(i)}}]),e}(),A=function(e){Object(s["a"])(t,e);var n=Object(o["a"])(t);function t(e){var r;return Object(a["a"])(this,t),r=n.call(this,e.decks,e.numberOfRecentCardsToIgnoreWhenSelectingNextCard),r.cardsToSelectFrom=e.cardsToSelectFrom,r.learningSession=e.learningSession,r}return t}(j),$=t("8276");function M(e,n,t){var r={title:"Finish Learning?",message:"You just finished your learning session. Do you want to finish and go to the deck selection?",barChart:{bars:n},buttons:[{name:"Review Cards",color:"grey"},{name:"Finish",color:"indigo",callback:function(){e.$eventHub.$emit(N["a"].QUIT_LEARNING,N["b"].NO_MORE_CARDS),Object($["a"])(),t()}}]};e.$eventHub.$emit(N["a"].SHOW_CUSTOM_DIALOG,r)}function D(e,n){e.$eventHub.$emit("showCustomDialog",{title:"Quit Learning?",message:"Do you really want to quit learning? Nevertheless, your progress is saved.",barChart:{bars:n},buttons:[{name:"Cancel",color:"grey"},{name:"Quit",color:"orange darken-1",callback:function(){e.$eventHub.$emit(N["a"].QUIT_LEARNING,N["b"].USER_ACTION),Object($["a"])()}}]})}var W=l["a"].extend({props:{decks:{type:Array},numberOfSelectedDecks:Number,cardLimit:String}}),H=function(e){Object(s["a"])(t,e);var n=Object(o["a"])(t);function t(){var e;return Object(a["a"])(this,t),e=n.apply(this,arguments),e.numberOfStarsInRating=2,e.learningSessionManager=new j([]),e.isLearningSessionFinishedAndComponentWillBeDestroyedSoon=!1,e.curLearningElement={deckId:0,cardId:0,showAnswer:!1,rating:{},card:{id:0,q:"",a:""}},e.renderComponent=!0,e}return Object(v["a"])(t,[{key:"created",value:function(){var e=this;this.isLearningSessionFinishedAndComponentWillBeDestroyedSoon=!1,this.$eventHub.$on(N["a"].SWIPE_LEFT_IN_LEARN,(function(){e.moveToNext()})),this.$eventHub.$on(N["a"].SWIPE_RIGHT_IN_LEARN,(function(){e.moveToPrev()})),this.$eventHub.$on(N["a"].PREPARE_QUIT_LEARNING,(function(){e.quitLearning()}))}},{key:"destroyed",value:function(){this.$eventHub.$off(N["a"].SWIPE_LEFT_IN_LEARN),this.$eventHub.$off(N["a"].SWIPE_RIGHT_IN_LEARN),this.$eventHub.$off(N["a"].PREPARE_QUIT_LEARNING)}},{key:"updateCurLearningElement",value:function(){this.isLearningSessionFinishedAndComponentWillBeDestroyedSoon||(this.curLearningElement=this.learningSessionManager.getCurrentLearningSessionElementWithCardDetails(),this.updateRatingForCurrentLearningElement(),Object($["c"])(this.learningSessionManager))}},{key:"updateRatingForCurrentLearningElement",value:function(){var e,n=this,t=0;void 0!==(null===(e=this.curLearningElement.rating)||void 0===e?void 0:e.r)&&(t=this.mapRatingFrom100ToStars(this.curLearningElement.rating.r)),this.$nextTick((function(){n.$refs.rating&&n.$refs.rating.setRating(t)}))}},{key:"beforeMount",value:function(){var e=Object($["b"])();if(e)this.learningSessionManager=new A(e);else{if(0===this.numberOfSelectedDecks)return void this.$router.replace("/");this.learningSessionManager=new j(this.decks.filter((function(e){return e.selected})))}this.updateCurLearningElement()}},{key:"checkIfCardIsEndOfSession",value:function(){var e=this.learningSessionManager.learningSession.currentElementIndex===this.learningSessionManager.learningSession.elements.length-1&&0===this.learningSessionManager.cardsToSelectFrom.length||"0"!==this.cardLimit&&this.learningSessionManager.learningSession.currentElementIndex===parseInt(this.cardLimit)-1;return e}},{key:"moveToNext",value:function(){this.checkIfCardIsEndOfSession()&&this.finishSession(),this.learningSessionManager.moveToNextLearningSessionElement(),this.forceRerender()}},{key:"moveToPrev",value:function(){this.learningSessionManager.moveToPrevLearningSessionElement(),this.forceRerender()}},{key:"revealAnswer",value:function(){this.learningSessionManager.revealAnswerForCurrentLearningSessionElement()}},{key:"onRating",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!n){var t=this.mapRatingFromStarsTo100(e);this.learningSessionManager.saveRatingForCurrentLearningSessionElement(t),Object($["c"])(this.learningSessionManager),this.moveToNext(),this.forceRerender()}}},{key:"forceRerender",value:function(){var e=this;this.renderComponent=!1,this.$nextTick((function(){e.renderComponent=!0}))}},{key:"mapRatingFromStarsTo100",value:function(e){return 100*(e-1)/(this.numberOfStarsInRating-1)}},{key:"mapRatingFrom100ToStars",value:function(e){return e*(this.numberOfStarsInRating-1)/100+1}},{key:"finishSession",value:function(){var e=this;M(this,this.getBarsForFinishLearningDialog(),(function(){e.isLearningSessionFinishedAndComponentWillBeDestroyedSoon=!0}))}},{key:"getBarsForFinishLearningDialog",value:function(){var e=[];e.push({name:"wrong",value:0}),e.push({name:"right",value:0});var n,t=Object(h["a"])(this.learningSessionManager.learningSession.elements);try{for(t.s();!(n=t.n()).done;){var r,i=n.value;void 0!==(null===(r=i.rating)||void 0===r?void 0:r.r)&&(e[this.mapRatingFrom100ToStars(i.rating.r)-1].value+=1)}}catch(a){t.e(a)}finally{t.f()}return e}},{key:"quitLearning",value:function(){D(this,this.getBarsForFinishLearningDialog())}},{key:"updateVerticalCentering",value:function(){var e,n=Object(h["a"])(document.getElementsByClassName("max-height"));try{for(n.s();!(e=n.n()).done;){var t=e.value;t.scrollHeight>t.clientHeight?t.classList.remove("flex-center"):t.classList.add("flex-center")}}catch(r){n.e(r)}finally{n.f()}}},{key:"mounted",value:function(){this.updateVerticalCentering()}},{key:"updated",value:function(){this.updateVerticalCentering(),this.updateCurLearningElement()}},{key:"buttonNext",get:function(){return this.checkIfCardIsEndOfSession()?{text:"Finish",color:"indigo lighten-1"}:{text:"SKIP",color:"grey lighten-1"}}}]),t}(W);H=Object(c["a"])([Object(u["a"])({components:{Rating:w,TextViewer:E}})],H);var P=H,B=P,G=(t("7c71"),t("6544")),V=t.n(G),Q=t("8336"),U=t("99d9"),q=t("2fa4"),J=Object(p["a"])(B,d,g,!1,null,"31eb372e",null),K=J.exports;V()(J,{VBtn:Q["a"],VCardActions:U["a"],VSpacer:q["a"]});var Y=l["a"].extend({props:{decks:{type:Array},learningSession:{type:Object},numberOfSelectedDecks:Number,cardLimit:String}}),z=function(e){Object(s["a"])(t,e);var n=Object(o["a"])(t);function t(){return Object(a["a"])(this,t),n.apply(this,arguments)}return t}(Y);z=Object(c["a"])([Object(u["a"])({components:{LearnComponent:K}})],z);var X=z,Z=X,ee=(t("991f"),Object(p["a"])(Z,r,i,!1,null,"6cc4e3a0",null));n["default"]=ee.exports},"76dc":function(e,n,t){"use strict";var r=t("a2d9"),i=t.n(r);i.a},"7c71":function(e,n,t){"use strict";var r=t("ed9f"),i=t.n(r);i.a},"991f":function(e,n,t){"use strict";var r=t("ed09"),i=t.n(r);i.a},a2d9:function(e,n,t){},ed09:function(e,n,t){},ed9f:function(e,n,t){},fe5f:function(e,n,t){}}]);
//# sourceMappingURL=chunk-d1ed4706.30546d81.js.map